<!DOCTYPE html>
<html lang="{$lang}">
<head>
	<meta charset="utf-8">
	<meta name="description" content="{ifset $web}{$web->description}{/ifset}">
	<meta name="author" content="Zdeněk Papučík, zdenek.papucik@gmail.com">
	<meta name="viewport" content="width=device-width, initial-scale=1">

	{* css *}
	<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/normalize/8.0.0/normalize.min.css">
	<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/jquery.perfect-scrollbar/1.3.0/css/perfect-scrollbar.min.css">
	<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/4.7.0/css/font-awesome.min.css">
	<link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Open+Sans:400,600&amp;subset=latin-ext">
	<link rel="stylesheet" href="https://css-ui.github.io/css/cssui.min.css">

	{* css dropdown *}
	<link rel="stylesheet" href="{$basePath}/www/css/style.dropdown.css">
	<link rel="stylesheet" href="{$basePath}/www/css/style.dropdown.light.css">

	{* css responsive menu *}
	<link rel="stylesheet" href="{$basePath}/www/css/style.menu.css">
	<link rel="stylesheet" href="{$basePath}/www/css/style.menu.light.css">

	{* css dashboard*}
	<link rel="stylesheet" href="{$basePath}/www/css/style.dashboard.css">
	<link rel="stylesheet" href="{$basePath}/www/css/style.css">
	<link rel="stylesheet" href="{$basePath}/www/css/style.united.css">

	{* website title and subtitle *}
	<title>{include subtitle|stripHtml|firstUpper}{ifset $web} | {$web->website}{/ifset}</title>
</head>
<body>
	{* navigation *}
	<div class="nav">

		{* click menu *}
		<div class="click">
			<i class="fa fa-bars menu" aria-hidden="true"></i>
		</div>

		{* sidebar *}
		<div class="sidebar">

			{* sidebar title *}
			<div class="title">
				<p n:snippet="title">{$web->website|truncate:15}</p>
			</div>

			{* sidebar logged in user *}
			<div class="logged sidebar">
			    	<ul class="clear">
					<li class="gravatar float left"><img src="{$gravatar}" alt="user"></li>
					<li class="user float left">{$user->identity->data['realname']|truncate:12} <a n:href=":Admin:Login:out">{_'user.logout'}</a></li>
				</ul>
			</div>

			<div class="responsive">

				{* sidebar menu *}
				<ul class="menu scrollbar">

					{* languages *}
					<li>
						<span class="name">{_'category.language'}</span>
						<ul>
							<li>
								<a n:href="this, 'lang' => 'cs'" n:class="$lang === 'cs' ? 'current' : 0">
									{_'menu.cs'}
								</a>
							</li>
						</ul>
					</li>

					{* menu *}
					<li n:foreach="$category as $c">
						<span class="name">{_$c->category}</span>
						<ul>
						    	<li n:foreach="$menu as $m">
								<a n:href="$m->link" n:class="$presenter->isLinkCurrent($m->link) ? 'current'">
									{_$m->name}
								</a>
							</li>
						</ul>
					</li>
				</ul>
			</div>
		</div>
	</div>

	{* header and content wrapper *}
	<div class="content-wrapper">
		<div class="header">
			<div class="clear">

				{* header dashboard  *}
				<div class="float left">
					<ul class="breadcrumb">
						<li>
							<a n:href=":Admin:Admin:" n:class="$moduleName === 'Admin:' ? 'current'">
								<i class="fa fa-square-o" aria-hidden="true"></i>{_'menu.admin'}
							</a>
						</li>
						<li n:if="$presenterName !== 'Admin'">
							<i class="fa fa-long-arrow-right" aria-hidden="true"></i>{_$breadcrumb}
						</li>
					</ul>
				</div>

				{* logged in user *}
				<div class="float right user panel">

					{* user identity *}
					<div class="float left logged in">
						<ul class="clear">
							<li class="user float left">{$user->identity->data['realname']}</li>
							<li class="gravatar float left"><img src="{$gravatar}" alt="user"></li>
						</ul>
					</div>

					{* dropdown menu *}
					<div class="float left">
						<div class="dropdown">

							{* dropdown menu click  *}
							<div class="clear">
								<a class="employ-toggle click float right" href="#">
									<i class="fa fa-ellipsis-v " aria-hidden="true"></i>
								</a>
							</div>

							{* show or hide menu *}
							<ul class="expand-dropdown">
								<li><a n:href=":Admin:Profile:" class="top"><i class="fa fa-user-o" aria-hidden="true"></i>{_'menu.profile'}</a></li>
								<li><a n:href=":Admin:Login:out" class="bottom"><i class="fa fa-sign-out" aria-hidden="true"></i>{_'user.logout'}</a></li>
							</ul>
						</div>
					</div>
				</div>
			</div>
		</div>

		{* content *}
		<div class="content">
			<div class="box style">

				{* flash message *}
				<div n:snippet="message">
					<p n:foreach="$flashes as $flash" class="message {$flash->type}">{_$flash->message}</p>
				</div>

				{* template content *}
			    	{include content}
			</div>
		</div>
	</div>

	<script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
	<script src="https://cdnjs.cloudflare.com/ajax/libs/nanobar/0.4.2/nanobar.min.js"></script>
	<script src="https://cdnjs.cloudflare.com/ajax/libs/jquery.perfect-scrollbar/1.3.0/perfect-scrollbar.min.js"></script>

	<script src="{$basePath}/www/js/nette.forms.min.js"></script>
	<script src="{$basePath}/www/js/nette.ajax.min.js"></script>
	<script src="{$basePath}/www/js/nette.ajax.spinner.js"></script>

	{* include script from template *}
	{block js}{/block}
	<script>
		$(function() {

			// perfect scrollbar
			const ps = new PerfectScrollbar('.scrollbar');

			// nanobar
			var nanobar = new Nanobar();
			    nanobar.go(100);

			// responsive sidebar
			$.nette.ext('responsive.menu', {
				init: function () {
					$('ul.menu li').each(function() {
						if ($(this).children('li.parent a.current').length > 0 ) {
							$(this).parent().find('ul.submenu').toggle();
							$(this).parent().find('li.parent').addClass('active');
						}
					});
				},
				load: function () {
					$('.nav .click').off('click').on('click', function() {
						$('.nav .responsive').toggleClass('expandable');
					});
					$('ul.menu li a').off('click').on('click', function() {
						$(this).parent('li.parent').toggleClass('active');
						$(this).parent().find('ul.submenu').slideToggle('fast');
					});
				}
			});

			// dropdown menu
			$.nette.ext('dropdown.menu', {
				load: function () {
					$('.employ-toggle').off('click').on('click', function () {
						var dropdown = '.expand-dropdown';
						$(dropdown).fadeToggle('fast');
						$(dropdown).on('click', function (e) {
							var target = e.target;
							var employ = '.employ-toggle';
							if (!$(target).is(employ) && !$(target).parents().is(employ)) {
								$(dropdown).hide();
							}
						});
					});
				}
			});

			// nette ajax initialization
			$.nette.init();
		});
	</script>
</body>
</html>
